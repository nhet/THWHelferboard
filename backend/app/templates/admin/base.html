
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>THEOrganigramm</title>
  <link rel="stylesheet" href="/static/styles.css" />
  <link rel="icon" href="/static/favicon.ico" type="image/x-icon">
 
</head>
<body hx-boost="true">
  <main>
  {% block content %}
    <header class="site-header">
      <h1>Helferboard - Admin</h1>
      <nav>
        <a href="/">Öffentlich</a>
        <a href="/admin">Admin</a>
        <a href="/admin/functions">Funktionen</a>
        <a href="/admin/helpers">Helfer</a>
        <a href="/admin/groups">Gruppen</a>
        <a href="/admin/settings">Einstellungen</a>
      </nav>
    </header>
    {% block admin_content %}{% endblock %}
  {% endblock %}
  </main>
  <script>
    document.addEventListener('paste', function (e) {
      const files = e.clipboardData.files;
      if (files.length > 0) {
        const fileInput = document.querySelector('input[type="file"]');
        if (fileInput) {
          fileInput.files = files;
          const label = fileInput.closest('label');
          if(label) {
            let hint = label.querySelector('.paste-hint');
            if(!hint) {
              hint = document.createElement('span');
              hint.className = 'paste-hint';
              hint.textContent = ' (Bild aus Zwischenablage eingefügt)';
              label.appendChild(hint);
            }
          }
        }
      }
    });

    (function() {
      function initClickableRows() {
        document.querySelectorAll('.list-table tbody tr').forEach(function(tr) {
          var href = tr.getAttribute('data-href');
          if(!href) return;
          tr.style.cursor = 'pointer';
          tr.tabIndex = 0;
          tr.addEventListener('click', function(e) {
            if (e.target.closest('a, button, form, input')) return;
            window.location = href;
          });
          tr.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
              if (e.target.closest('a, button, form, input')) return;
              e.preventDefault();
              window.location = href;
            }
          });
        });
      }
      document.addEventListener('DOMContentLoaded', initClickableRows);
      // Re-init if DOM changes (HTMX or dynamic inserts)
      var observer = new MutationObserver(function() { initClickableRows(); });
      observer.observe(document.body, {childList:true, subtree:true});
    })();
  </script>
  </body>
</html>