{% extends 'admin/base.html' %}
{% block admin_content %}
<h2>Einstellungen</h2>
<form method="post" action="/admin/settings/save">
  <table>
    <tr><th>Einstellung</th><th>Wert</th></tr>
    <tr>
      <td>Incognito-Modus</td><td>
        <select name="incognito_level">
          <option value="0" {% if incognito_level == 0 %}selected{% endif %}>Aus</option>
          <option value="1" {% if incognito_level == 1 %}selected{% endif %}>Namen abkÃ¼rzen</option>
          <option value="2" {% if incognito_level == 2 %}selected{% endif %}>Bilder-Rondell (keine Helferansicht)</option>
        </select>
      </td>    
    </tr>
    <tr>
      <td>Titel fÃ¼r Rondell</td>
      <td>
        <input type="text" name="carousel_title" value="{{ carousel_title }}" placeholder="z.B. Willkommen bei Helferboard">
      </td>
    </tr>
  </table>
  <div class="form-actions">
    <button class="btn" type="submit">Speichern</button>
  </div>
</form>

<h3>Bilder fÃ¼r Rondell</h3>
<form method="post" action="/admin/settings/upload_carousel" enctype="multipart/form-data">
  <input type="file" name="image" accept="image/*" required>
  <button class="btn" type="submit">Hochladen</button>
</form>
<ul>
  {% for img in carousel_images %}
    <li>
      <img src="{{ url_for('static', path=img.path) }}" alt="Carousel" style="width: 100px;" />
      <form method="post" action="/admin/settings/delete_carousel/{{ img.id }}" style="display:inline" onsubmit="return confirm('Bild wirklich lÃ¶schen?')">
        <button class="btn danger" type="submit">LÃ¶schen</button>
      </form>
    </li>
  {% endfor %}
</ul>
<hr/
<h3>Daten-Management</h3>
<div style="background-color: #f5f5f5; padding: 20px; border-radius: 5px; margin: 20px 0;">
  <h4>Export</h4>
  <p>Exportieren Sie alle Daten (Datenbank + Uploads) als ZIP-Datei:</p>
  <form method="post" action="/admin/settings/export" style="display:inline;">
    <button class="btn" type="submit">ðŸ“¥ Daten exportieren</button>
  </form>

  <h4 style="margin-top: 30px;">Import</h4>
  <p>Importieren Sie eine zuvor exportierte ZIP-Datei:</p>
  <form method="post" action="/admin/settings/import" enctype="multipart/form-data">
    <input type="file" name="backup_file" accept=".zip" required>
    <button class="btn" type="submit">ðŸ“¤ Daten importieren</button>
  </form>
  <p style="color: #666; font-size: 0.9em; margin-top: 10px;">
    <strong>Hinweis:</strong> Der Import Ã¼berschreibt Ihre aktuellen Daten. 
    Stellen Sie sicher, dass Sie vorher ein Backup exportieren.
  </p>
</div>
{% endblock %}
